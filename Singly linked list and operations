#include <stdio.h>
#include <stdlib.h>
struct node{
    int data;
    struct node* next;
};
int main(){
    struct node* head=NULL,*newnode,*prev,*curr,*next,*temp;
    int choice,pos,i,key,data,n;
     printf("Enter number of nodes to create: ");
    scanf("%d", &n);
    for (i = 0; i < n; i++) {
        newnode = (struct node*)malloc(sizeof(struct node));
        printf("Enter data for node %d: ", i + 1);
        scanf("%d", &newnode->data);
        newnode->next = NULL;
        if (head == NULL) {
            head = newnode;
            temp = newnode;
        } else {
            temp->next = newnode;
            temp = newnode;
        }
    }
    printf("\nInitial List: ");
    temp = head;
    while (temp != NULL) {
        printf("%d -> ", temp->data);
        temp = temp->next;
    }
    printf("NULL\n");

    printf("enter position you want to insert an element at: ");
    scanf("%d",&pos);
    newnode=(struct node*)malloc(sizeof(struct node));
    printf("enter element you wasant to insert: ");
    scanf("%d",&newnode->data);
    newnode->next=NULL;
    if(pos==1){
        newnode->next=head;
        head=newnode;
    }
    else{
        temp=head;
        for(i=1;temp!=NULL && i<pos-1;i++){
            temp=temp->next;
        }
        if(temp==NULL){
            printf("position out of range...");
            free(newnode);
        }
        else{
            newnode->next=temp->next;
            temp->next=newnode;
        }
    }
    printf("enter element to delete: ");
    scanf("%d",&key);
            temp = head;
            prev = NULL;
            if (temp != NULL && temp->data == key) {
                head = temp->next;
                free(temp);
            }
            else {
                while (temp != NULL && temp->data != key) {
                    prev = temp;
                    temp = temp->next;
                }
                if (temp == NULL) {
                    printf("Element %d not found!\n", key);
                } else {
                    prev->next = temp->next;
                    free(temp);
                }
            }
            prev = NULL;
            curr = head;
            next = NULL;
            while (curr != NULL) {
                next = curr->next;
                curr->next = prev;
                prev = curr;
                curr = next;
            }
            head = prev;
            printf("List Reversed\n");
            temp = head;
            printf("List: ");
            while (temp != NULL) {
                printf("%d -> ", temp->data);
                temp = temp->next;
            }
            printf("NULL\n");
    return 0;
}
